## 父组件与子组件的挂载（mounted）顺序？
在 Vue 3 中，组件的加载顺序是先加载父组件，然后才是子组件。
虽然加载的顺序是父组件先于子组件，但 **挂载mounted** 组件的顺序正好相反：**先挂载子组件，后挂载父组件**。

### 加载和挂载的区别

为了更好地理解这个顺序，我们先区分一下**加载（load）**和**挂载（mount）**这两个概念：

* **加载（load）**：这个过程可以理解为 Vue 在解析和创建组件实例。在 Vue 渲染组件树时，它会从上到下，从父组件开始，逐步创建组件实例。所以，是先创建父组件，然后是子组件。
* **挂载（mount）**：这个过程是指 Vue 将组件的 DOM 元素插入到实际的页面（DOM 树）中。当组件实例创建完毕后，Vue 会从内到外，从最深的子组件开始，依次将它们挂载到 DOM 上。

### 为什么先挂载子组件？

这个设计背后的逻辑主要基于以下两点：

1.  **依赖关系**：父组件的模板中通常会包含子组件的 `<template>` 标签。为了确保父组件能够正确地渲染和使用子组件，Vue 需要先确保子组件本身已经完全准备好。这包括子组件的 DOM 已经被创建并挂载到页面上。只有子组件的 DOM 存在，父组件才能正确地插入并管理它。你可以把这想象成一个建筑过程：你需要先完成内部的房间和设施（子组件），然后才能在外部的大楼（父组件）中安置它们。

2.  **生命周期**：Vue 的生命周期钩子也遵循这个顺序。当一个父组件被渲染时，Vue 会先处理它的子组件。
    * 首先，子组件的 `onBeforeMount` 钩子被调用。
    * 然后，子组件被挂载到 DOM 上，它的 `onMounted` 钩子被调用。
    * 当所有子组件都挂载完毕后，父组件的 `onBeforeMount` 钩子才会被调用。
    * 最后，父组件被挂载到 DOM 上，它的 `onMounted` 钩子才被调用。

这个由内而外的挂载顺序确保了当父组件的 `onMounted` 钩子被触发时，它的所有子组件都已经被正确地挂载到 DOM 上了。这让开发者可以在父组件的 `onMounted` 钩子中安全地执行依赖于子组件 DOM 存在的逻辑，例如获取子组件的 DOM 元素或调用其方法。

总而言之，Vue 3 的渲染机制是**先创建父组件，再创建子组件（加载），但为了保证父组件能够正确地管理子组件的 DOM，会先将子组件挂载到页面上，然后再挂载父组件（挂载）**。

## 参考资料
[AI 资料](https://gemini.google.com/app/121be10cc04f886c)
